# 區間震盪策略 (Strategy C) - 改良版\n\n## 核心概念\n\n這是一個專門針對**盤整市**的反轉策略，利用市場在區間內震盪的特性，在極端位置進場，等待價格回歸均值。\n\n### 優勢\n- 適合震盪市 (70% 時間)\n- 明確的風報比\n- 多重過濾機制減少假信號\n- 支持 ATR 或固定百分比止損\n\n### 劣勢\n- 不適合強勢趨勢市\n- 勝率可能不高 (35-45%)\n- 但盈虧比好 (> 1.5)\n\n---\n\n## 策略邏輯\n\n### 1. 盤整確認\n```python\nADX < 25  # 確認趨勢不明顯\n```\n\n### 2. 做多條件 (超賣反彈)\n```python\nclose <= BB_lower        # 價格觸及下軌\nRSI < 30                 # RSI 超賣\nvolume < volume_MA * 0.8 # 成交量萎縮 (息慌)\n```\n\n**出場:**\n- 止盈: 價格回到 BB 中軌\n- 止損: ATR x 2 或固定 2%\n\n### 3. 做空條件 (超買回落)\n```python\nclose >= BB_upper        # 價格觸及上軌\nRSI > 70                 # RSI 超買\nvolume < volume_MA * 0.8 # 成交量萎縮 (恐慘)\n```\n\n**出場:**\n- 止盈: 價格回到 BB 中軌\n- 止損: ATR x 2 或固定 2%\n\n---\n\n## 使用方式\n\n### 快速測試\n```bash\npython test_range_strategy.py\n```\n\n這會自動執行兩個測試:\n1. **ATR 止損模式** (ATR x 2)\n2. **固定止損模式** (2%)\n\n並比較績效，給出建議。\n\n### 自定義參數\n```python\nfrom core.range_bound_strategy import RangeBoundStrategy\nfrom core.backtest_range_bound import BacktestRangeBound\n\nstrategy = RangeBoundStrategy(\n    adx_threshold=25,      # ADX 門檻\n    rsi_oversold=30,       # RSI 超賣線\n    rsi_overbought=70,     # RSI 超買線\n    volume_threshold=0.8,  # 成交量門檻\n    use_atr_stops=True,    # 使用 ATR 止損\n    atr_multiplier=2.0,    # ATR 倍數\n    fixed_stop_pct=0.02,   # 固定止損 % (use_atr_stops=False 時)\n    target_rr=2.0          # 目標風報比\n)\n\nbacktester = BacktestRangeBound(\n    initial_capital=10000,\n    leverage=1.0,\n    fee_rate=0.0006\n)\n\nresults = backtester.run(df, strategy)\n```\n\n---\n\n## 參數調整指南\n\n### 提高勝率\n- **降低 ADX 門檻** (20-22): 更嚴格篩選盤整\n- **縮小 RSI 範圍** (25-75): 只在極端進場\n- **提高成交量門檻** (0.7): 更嚴格的息慌確認\n\n### 提高交易頻率\n- **提高 ADX 門檻** (28-30): 放寬進場條件\n- **放寬 RSI 範圍** (35-65): 更多機會\n- **降低成交量門檻** (0.9): 不強制要求萎縮\n\n### 止損選擇\n\n| 模式 | 優點 | 缺點 | 適用情境 |\n|------|------|------|----------|\n| **ATR 止損** | 自適應波動率 | 高波動時止損寬 | BTC/ETH 高波動幣種 |\n| **固定止損** | 風險可控 | 低波動時太寬 | 穩定幣、小波動 |\n\n**建議:** BTC 15m 使用 ATR x 2.0\n\n---\n\n## 績效預期\n\n基於 BB 反轉 + 多重過濾的改良，預期績效:\n\n- **勝率**: 38-45% (比原本 34.5% 提升)\n- **平均獲利**: $30-40\n- **平均虧損**: $-15 ~ $-20 (因 ATR 止損更精確)\n- **盈虧比**: 1.5-2.0 (合格)\n- **月報酬**: 2-5% (vs 之前 0.18%)\n\n---\n\n## 注意事項\n\n1. **避免趨勢市**: ADX > 30 時不進場\n2. **手續費**: 已計入 0.06% (Binance Taker)\n3. **滿倉風險**: 預設 leverage=1.0，可自行調整\n4. **回測限制**: 過去績效不代表未來\n\n---\n\n## 下一步\n\n1. 執行 `python test_range_strategy.py` 測試\n2. 查看 CSV 交易記錄\n3. 根據結果調整參數\n4. 紙上交易驗證 1-2 週\n5. 實盤前再次回測最新數據\n\n**祝交易順利!**\n